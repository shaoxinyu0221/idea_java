<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.product.dao.UserDao">

    <resultMap id="queryCartByUserNameMap" type="com.product.entity.User">
        <id column="id" property="id"></id>
        <result column="username" property="username"></result>
        <result column="age" property="age"></result>
        <result column="money" property="money"></result>
        <collection property="cartList" ofType="com.product.entity.Cart">
            <id column="cid" property="id"></id>
            <result column="u_id" property="uId"></result>
            <result column="p_id" property="pId"></result>
            <result column="number" property="number"></result>
            <result column="allPrice" property="allPrice"></result>
            <result column="p_name" property="pName"></result>
            <result column="p_price" property="price"></result>
        </collection>
    </resultMap>


    <select id="queryCartByUserName" resultMap="queryCartByUserNameMap">
        select user.*, product.*,cart.id as cid,cart.*
        from user,product,cart where user.id=cart.u_id and product.id=cart.p_id and username=#{username};
    </select>

</mapper>